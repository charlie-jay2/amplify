<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Countdown timer logic remains unchanged...
        
        // Modal logic remains unchanged...

        // Form submission logic
        document.getElementById("applicationForm").addEventListener("submit", function(e) {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const teamName = document.getElementById("teamName").value;
            const soapboxFile = document.getElementById("soapboxFile").files[0]; // File input

            // You may want to validate the file type and size here
            if (!soapboxFile || soapboxFile.type !== 'application/octet-stream') {
                alert("Please upload a valid .rbxm file.");
                return;
            }

            // Webhook expects JSON, so we're building the payload
            const webhookData = {
                username: "Soapbox Race Application",
                embeds: [{
                    title: "New Application",
                    color: 16711680,  // Red color
                    fields: [
                        { name: "Name", value: name },
                        { name: "Team Name", value: teamName },
                        { name: "Soapbox File", value: soapboxFile.name }  // Only the filename
                    ],
                    timestamp: new Date().toISOString()
                }]
            };

            // Send JSON payload to Discord webhook
            fetch("https://discord.com/api/webhooks/1246015533728403470/jJd0pwkXLT5hP34DpHz12kcGvFy8dwxEve9f47JkpMG5MhHYpkdLb8GTzQiXronrhsDS", {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(webhookData)
            }).then(response => {
                if (response.ok) {
                    alert("Application submitted successfully!");
                    modal.style.display = "none";
                } else {
                    alert("Failed to submit application.");
                }
            }).catch(error => {
                console.error("Error:", error);
                alert("Failed to submit application.");
            });
        });
    });
</script>
